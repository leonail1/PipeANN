========================================
SIFT1M Filtered Search - 标签选择性实验
========================================
数据目录: /mnt/ext4/lzg/sift1m_pq
索引目录: /mnt/ext4/lzg/sift1m_pq/indices
搜索模式: range
目标召回率: 98.0% - 98.05%
搜索线程数: 64, Benchmark线程数: 1

[1/3] 生成数据标签 (标签i有i%的向量包含, i=1~100)...
  ✓ 已存在

[2/3] 确保索引存在（调用 rebuild_index.py）...
  ✓ 索引就绪

[3/3] 开始标签选择性实验...
  目标: 对每个标签找到最优L值 (模式=range, Recall>=98.0%)

  已完成的Label: []


  [5/100] 选择性=5% ... 
    GT文件已存在，直接使用

    开始搜索最优L值 (初始L_MAX=100, 使用64线程)...
    先测试 L_MAX=100...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
   100          32     3704.19    15988.76   425450.00        0.00      117.90       24.55
    ===============

    提取到的指标: Recall=24.55, AvgLat=15988.76, QPS=3704.19, P99Lat=425450.0, Hops=0.0, IOs=117.9
    → L_MAX=100 召回率不足 (24.55% < 98.0%, 差距73.5%), 增长因子=5.0, 新L_MAX=500
    先测试 L_MAX=500...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
   500          32     1279.82    48977.40   867831.00        0.00      509.69       56.73
    ===============

    提取到的指标: Recall=56.73, AvgLat=48977.4, QPS=1279.82, P99Lat=867831.0, Hops=0.0, IOs=509.69
    → L_MAX=500 召回率不足 (56.73% < 98.0%, 差距41.3%), 增长因子=3.0, 新L_MAX=1500
    先测试 L_MAX=1500...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  1500          32      471.47   133552.44  1356165.00        0.00     1505.78       79.69
    ===============

    提取到的指标: Recall=79.69, AvgLat=133552.44, QPS=471.47, P99Lat=1356165.0, Hops=0.0, IOs=1505.78
    → L_MAX=1500 召回率不足 (79.69% < 98.0%, 差距18.3%), 增长因子=1.5, 新L_MAX=2250
    先测试 L_MAX=2250...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  2250          32      310.75   203332.62  1687743.00        0.00     2254.73       86.26
    ===============

    提取到的指标: Recall=86.26, AvgLat=203332.62, QPS=310.75, P99Lat=1687743.0, Hops=0.0, IOs=2254.73
    → L_MAX=2250 召回率不足 (86.26% < 98.0%, 差距11.7%), 增长因子=1.5, 新L_MAX=3375
    先测试 L_MAX=3375...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  3375          32      196.59   321656.16  2185837.00        0.00     3378.89       91.32
    ===============

    提取到的指标: Recall=91.32, AvgLat=321656.16, QPS=196.59, P99Lat=2185837.0, Hops=0.0, IOs=3378.89
    → L_MAX=3375 召回率不足 (91.32% < 98.0%, 差距6.7%), 增长因子=1.3, 新L_MAX=4387
    先测试 L_MAX=4387...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  4387          32      141.15   447540.31  3189842.00        0.00     4390.41       93.77
    ===============

    提取到的指标: Recall=93.77, AvgLat=447540.31, QPS=141.15, P99Lat=3189842.0, Hops=0.0, IOs=4390.41
    → L_MAX=4387 召回率不足 (93.77% < 98.0%, 差距4.2%), 增长因子=1.2, 新L_MAX=5264
    先测试 L_MAX=5264...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  5264          32      121.95   520218.88  2428764.00        0.00     5267.15       95.16
    ===============

    提取到的指标: Recall=95.16, AvgLat=520218.88, QPS=121.95, P99Lat=2428764.0, Hops=0.0, IOs=5267.15
    → L_MAX=5264 召回率不足 (95.16% < 98.0%, 差距2.8%), 增长因子=1.2, 新L_MAX=6316
    先测试 L_MAX=6316...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  6316          32      127.07   497507.47  2249877.00        0.00     6318.90       96.33
    ===============

    提取到的指标: Recall=96.33, AvgLat=497507.47, QPS=127.07, P99Lat=2249877.0, Hops=0.0, IOs=6318.9
    → L_MAX=6316 召回率不足 (96.33% < 98.0%, 差距1.7%), 增长因子=1.2, 新L_MAX=7579
    先测试 L_MAX=7579...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  7579          32      100.43   630807.56  2010023.00        0.00     7581.66       97.25
    ===============

    提取到的指标: Recall=97.25, AvgLat=630807.56, QPS=100.43, P99Lat=2010023.0, Hops=0.0, IOs=7581.66
    → L_MAX=7579 召回率不足 (97.25% < 98.0%, 差距0.8%), 增长因子=1.2, 新L_MAX=9094
    先测试 L_MAX=9094...
    === 搜索结果 ===
     L   I/O Width         QPS  AvgLat(us)     P99 Lat   Mean Hops    Mean IOs   Recall@10
==========================================================================================
  9094          32       75.73   836636.12  1973808.00        0.00     9096.43       97.98
    ===============

    提取到的指标: Recall=97.98, AvgLat=836636.12, QPS=75.73, P99Lat=1973808.0, Hops=0.0, IOs=9096.43
    → L_MAX=9094 召回率不足 (97.98% < 98.0%, 差距0.0%), 增长因子=1.2, 新L_MAX=10912
    先测试 L_MAX=10912...
